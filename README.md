# 프로젝트 회고록

이 문서는 프로젝트 진행 중 겪었던 이슈와 그 해결 과정을 기록한 회고록입니다. 각 항목별로 문제 상황, 해결 방법 및 개선 방향을 정리하였습니다.

---

## 1. 환경 변수 파일 분리 및 관리

- **문제 상황**

  - 개발 시 `fetch("/")`나 `axios`의 상대 경로 사용으로 인해, 배포 환경에서 Vite 개발 서버의 포트(5173)로 API 요청이 보내져 로그인 및 회원가입 등의 기본 기능이 정상적으로 작동하지 않았습니다.

- **해결 방법**

  - API 호출 시 절대 URL을 사용하도록 `.env` 파일에 API 주소를 지정하였습니다.
  - 로컬 개발과 배포 환경을 구분하기 위해 `.env.local`과 `.env.production` 파일을 사용, Vite가 각 환경에 맞게 자동으로 환경 변수를 로드하도록 설정하여 문제를 해결하였습니다.

---

## 2. JWT 디코드 라이브러리 사용법

- **문제 상황**

  - `jwt-decode` 라이브러리의 import 방식으로 인한 오류가 발생하였습니다.
  - 초기에 `import jwtDecode from 'jwt-decode'`로 사용하였으나 오류가 발생하여 화면이 렌더링이 되지 않는 현상을 마주했습니다.

- **해결 방법**
  - 구글링 결과 `{ jwtDecode }` 방식으로 import해야 정상 동작하는 것을 확인하였습니다.

---

## 3. 인프라 담당이 지정한 환경 변수 유지

- **문제 상황**

  - 인프라 팀이 지정한 `.env.production` 파일의 URL 규칙(HTTP에서 HTTPS로 전환 시 포트 번호와 `/api` 경로 적용)을 변경하려고 시도함.
  - 처음에는 `/api` 접두사가 잘못된 URL이라고 생각하여 수정하려 했으나, 실제로는 Nginx 설정에 따른 올바른 요청 경로임을 확인하였습니다.

- **해결 방법**

  - 인프라 팀에서 지정한 환경 변수 값을 그대로 사용함으로써, Nginx의 프록시 설정에 맞춰 API 호출이 정상적으로 이루어지도록 했습니다.

- **개선 및 권장 사항**
  - 팀 내(특히 인프라 담당자와) 설정 규칙에 대해 충분히 논의한 후, 환경 변수에 대한 변경을 최소화하는 것이 좋습니다.
  - 배포 전 Nginx 등의 서버 설정과 환경 변수 간의 연동 관계를 미리 파악해야 하고 인프라 쪽에도 공부가 필요하다는 점을 알게되었습니다.

---

## 4. S3 이미지 파일명 문제 해결

- **문제 상황**

  - S3에 업로드한 이미지의 URL은 정상적으로 반환되었으나, 파일명에 한글이 포함된 경우 이미지가 깨져 보이는 현상이 발생했습니다.

- **해결 방법**

  - 파일 업로드 시 파일명에 한글이 포함되지 않도록, 영어와 숫자로 이루어진 랜덤 문자열로 파일명을 재정의하는 함수를 구현하여 문제를 해결했습니다.

---

## 5. API 호출 최적화: 추가 데이터 요청

- **문제 상황**

  - 초기에는 특정 데이터(예: user_id 등)가 누락된 API 응답에 대해 백엔드 담당자에게 별도의 추가 호출로 값을 요청하려고 했습니다.

- **해결 방법**

  - 이후, 다른 API 호출에서 해당 값들이 반환되는 것을 확인하고, 이를 활용하여 별도의 호출 없이 데이터를 통합하였습니다.

---

## 6. 지도 영역 하이라이트 구현

- **문제 상황**

  - lawtalk의 지역별 지도를 참고하여, 특정 영역에 마우스 오버 시 하이라이트 효과(노란색 등)를 구현하려 했으나, SVG 파일의 복잡한 path 데이터를 직접 다루는 과정에서 어려움을 겪었습니다.

- **해결 방법**

  - 초기에는 SVG를 활용해 각 영역을 구현하려 했으나 결과가 미흡하여, 배경 이미지가 포함된 `div`를 `relative`로 지정한 후, 각 영역을 `absolute` 위치로 오버레이하는 방식으로 전환하였습니다.
  - 픽셀 단위(`top`, `left`, `width`, `height`)로 세밀하게 조정하여 lawtalk 지도와 유사한 UI를 구현, 마우스 오버 효과를 적용하여 성공적으로 구현하였습니다.

---

## 7. 후기

- 항상 풀스택으로 제가 담당한 부분에 대하여 백엔드 개발과 프론트 개발을 동행하다가 처음으로 전공자들과 백과 프론트를 구분하여 개발을 해보았습니다.
- 제가 만든게 아니다 보니 뭔가 필요한 값에 대해 백엔드 담당자와 회의를 통해 합의를 보기도 하였으나 불필요한 값에 대해서는 백에드 담장자에게는 거부를 받아보기도 하였습니다.
- 이 과정에서 협업에서 어떤 방향과 태도로 진행하여야 하는지 알게 되었고 좋은 경험이 되었던거 같습니다.
